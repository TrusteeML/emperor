!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.dashjs||(b.dashjs={})).MetricsReporting=a()}}(function(){return function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){return e(b[g][1][a]||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=function(){function a(a,b,c,d){var e=g(d);!e[a]&&b&&(e[a]={instance:b,override:c})}function b(a,b){for(var c in j){var d=j[c];if(d.context===a&&d.name===b)return d.instance}return null}function c(a,b,c){for(var d in j){var e=j[d];if(e.context===a&&e.name===b)return void(j[d].instance=c)}j.push({name:b,context:a,instance:c})}function d(a){return function(b){return void 0===b&&(b={}),{create:function(){return f(a.__dashjs_factory_name,a.apply({context:b},arguments),b,arguments)}}}}function e(a){return function(c){var d;return void 0===c&&(c={}),{getInstance:function(){return d||(d=b(c,a.__dashjs_factory_name)),d||(d=f(a.__dashjs_factory_name,a.apply({context:c},arguments),c,arguments),j.push({name:a.__dashjs_factory_name,context:c,instance:d})),d}}}}function f(a,b,c,d){var e=g(c),f=e[a];if(f){var i=f.instance;if(!f.override)return i.apply({context:c,factory:h},d);i=i.apply({context:c,factory:h,parent:b},d);for(var j in i)b.hasOwnProperty(j)&&(b[j]=i[j])}return b}function g(a){var b;return i.forEach(function(c){c===a&&(b=c)}),b||(b=i.push(a)),b}var h,i=[],j=[];return h={extend:a,getSingletonInstance:b,setSingletonInstance:c,getSingletonFactory:e,getClassFactory:d}}(),e=d;c.default=e},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){return!b||"object"!==e(b)&&"function"!=typeof b?h(a):b}function h(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function i(a){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=d(a(4)),m=function(a){function b(){var a;return f(this,b),a=g(this,i(b).call(this)),a.AST_IN_FUTURE="astinfuture",a.BUFFERING_COMPLETED="bufferingCompleted",a.BUFFER_CLEARED="bufferCleared",a.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",a.BYTES_APPENDED="bytesAppended",a.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",a.CHUNK_APPENDED="chunkAppended",a.CURRENT_TRACK_CHANGED="currenttrackchanged",a.DATA_UPDATE_COMPLETED="dataUpdateCompleted",a.DATA_UPDATE_STARTED="dataUpdateStarted",a.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",a.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",a.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",a.INITIALIZATION_LOADED="initializationLoaded",a.INIT_FRAGMENT_LOADED="initFragmentLoaded",a.INIT_REQUESTED="initRequested",a.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",a.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",a.LOADING_COMPLETED="loadingCompleted",a.LOADING_PROGRESS="loadingProgress",a.MANIFEST_UPDATED="manifestUpdated",a.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",a.QUOTA_EXCEEDED="quotaExceeded",a.REPRESENTATION_UPDATED="representationUpdated",a.SEGMENTS_LOADED="segmentsLoaded",a.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",a.SOURCEBUFFER_APPEND_COMPLETED="sourceBufferAppendCompleted",a.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",a.STREAMS_COMPOSED="streamsComposed",a.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",a.STREAM_COMPLETED="streamCompleted",a.STREAM_INITIALIZED="streaminitialized",a.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",a.TIMED_TEXT_REQUESTED="timedTextRequested",a.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",a.URL_RESOLUTION_FAILED="urlResolutionFailed",a.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",a.XLINK_ALL_ELEMENTS_LOADED="xlinkAllElementsLoaded",a.XLINK_ELEMENT_LOADED="xlinkElementLoaded",a.XLINK_READY="xlinkReady",a}return j(b,a),b}(l.default),n=m;c.default=n},{4:4}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){return!b||"object"!==e(b)&&"function"!=typeof b?h(a):b}function h(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function i(a){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=d(a(2)),m=function(a){function b(){return f(this,b),g(this,i(b).apply(this,arguments))}return j(b,a),b}(l.default),n=new m,o=n;c.default=o},{2:2}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function f(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),a}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var g=function(){function a(){d(this,a)}return f(a,[{key:"extend",value:function(a,b){if(a){var c=!!b&&b.override,d=!!b&&b.publicOnly;for(var e in a)!a.hasOwnProperty(e)||this[e]&&!c||d&&-1===a[e].indexOf("public_")||(this[e]=a[e])}}}]),a}(),h=g;c.default=h},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){return!b||"object"!==e(b)&&"function"!=typeof b?h(a):b}function h(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function i(a){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=d(a(4)),m=function(a){function b(){var a;return f(this,b),a=g(this,i(b).call(this)),a.BUFFER_EMPTY="bufferstalled",a.BUFFER_LOADED="bufferloaded",a.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",a.ERROR="error",a.LOG="log",a.MANIFEST_LOADED="manifestloaded",a.METRICS_CHANGED="metricschanged",a.METRIC_CHANGED="metricchanged",a.METRIC_ADDED="metricadded",a.METRIC_UPDATED="metricupdated",a.PERIOD_SWITCH_COMPLETED="streamswitchcompleted",a.PERIOD_SWITCH_STARTED="streamswitchstarted",a.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",a.QUALITY_CHANGE_RENDERED="qualityChangeRendered",a.STREAM_INITIALIZED="streaminitialized",a.TEXT_TRACKS_ADDED="alltexttracksadded",a.TEXT_TRACK_ADDED="texttrackadded",a.CAN_PLAY="canPlay",a.PLAYBACK_ENDED="playbackEnded",a.PLAYBACK_ERROR="playbackError",a.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",a.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",a.PLAYBACK_PAUSED="playbackPaused",a.PLAYBACK_PLAYING="playbackPlaying",a.PLAYBACK_PROGRESS="playbackProgress",a.PLAYBACK_RATE_CHANGED="playbackRateChanged",a.PLAYBACK_SEEKED="playbackSeeked",a.PLAYBACK_SEEKING="playbackSeeking",a.PLAYBACK_STARTED="playbackStarted",a.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",a}return j(b,a),b}(l.default),n=new m,o=n;c.default=o},{4:4}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a){return d=(0,f.default)(e).getInstance({eventBus:a.eventBus,metricsModel:a.metricsModel}),(0,h.default)(e).create(a)}function b(){return(0,j.default)(e).getInstance()}function c(){return(0,i.default)(e).getInstance()}var d,e=this.context;return{createMetricsReporting:a,getReportingFactory:b,getMetricsHandlerFactory:c}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(20)),g=d(a(7)),h=d(a(8)),i=d(a(13)),j=d(a(18)),k=d(a(1));e.__dashjs_factory_name="MetricsReporting";var l=k.default.getClassFactory(e);l.events=g.default;var m=l;c.default=m},{1:1,13:13,18:18,20:20,7:7,8:8}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){return!b||"object"!==e(b)&&"function"!=typeof b?h(a):b}function h(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function i(a){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var l=d(a(4)),m=function(a){function b(){var a;return f(this,b),a=g(this,i(b).call(this)),a.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",a.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",a}return j(b,a),b}(l.default),n=new m,o=n;c.default=o},{4:4}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(b){if(!b.error){var c=Object.keys(e);(0,g.default)(h).getInstance({dashManifestModel:a.dashManifestModel}).getMetrics(b.manifest).forEach(function(b){var d=JSON.stringify(b);if(e.hasOwnProperty(d))c.splice(d,1);else try{var g=(0,f.default)(h).create(a);g.initialize(b),e[d]=g}catch(b){}}),c.forEach(function(a){e[a].reset(),delete e[a]}),k.trigger(i.default.METRICS_INITIALISATION_COMPLETE)}}function c(){Object.keys(e).forEach(function(a){e[a].reset()}),e={}}function d(){k.on(j.default.MANIFEST_UPDATED,b),k.on(j.default.STREAM_TEARDOWN_COMPLETE,c)}var e={},h=this.context,k=a.eventBus;return d(),{}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(9)),g=d(a(22)),h=d(a(1)),i=d(a(7)),j=d(a(3));e.__dashjs_factory_name="MetricsCollectionController";var k=h.default.getClassFactory(e);c.default=k},{1:1,22:22,3:3,7:7,9:9}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(b){try{f=(0,g.default)(j).create({mediaElement:a.mediaElement}),f.initialize(b.Range),e=(0,h.default)(j).create({log:a.log}),e.initialize(b.Reporting,f),d=(0,i.default)(j).create({log:a.log,eventBus:a.eventBus}),d.initialize(b.metrics,e)}catch(k){throw c(),k}}function c(){d&&d.reset(),e&&e.reset(),f&&f.reset()}var d,e,f,j=this.context;return{initialize:b,reset:c}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(11)),h=d(a(12)),i=d(a(10));e.__dashjs_factory_name="MetricsController";var j=f.default.getClassFactory(e);c.default=j},{1:1,10:10,11:11,12:12}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a){g.forEach(function(b){b.handleNewMetric(a.metric,a.value,a.mediaType)})}function c(a,c){a.split(",").forEach(function(a,b,d){var e;if(-1!==a.indexOf("(")&&-1===a.indexOf(")")){var f=d[b+1];f&&-1===f.indexOf("(")&&-1!==f.indexOf(")")&&(a+=","+f,delete d[b+1])}(e=k.create(a,c))&&g.push(e)}),j.on(h.default.METRIC_ADDED,b,e),j.on(h.default.METRIC_UPDATED,b,e)}function d(){j.off(h.default.METRIC_ADDED,b,e),j.off(h.default.METRIC_UPDATED,b,e),g.forEach(function(a){return a.reset()}),g=[]}var e,g=[],i=this.context,j=a.eventBus,k=(0,f.default)(i).getInstance({log:a.log,eventBus:a.eventBus});return e={initialize:c,reset:d}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(13)),g=d(a(1)),h=d(a(5));e.__dashjs_factory_name="MetricsHandlersController";var i=g.default.getClassFactory(e);c.default=i},{1:1,13:13,5:5}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a){a&&a.length&&(a.forEach(function(a){var b=a.starttime,c=b+a.duration;h.add(b,c)}),i=!!a[0]._useWallClockTime)}function c(){h.clear()}function d(){h=(0,g.default)(j).create()}function e(){var a,b=h.length;if(!b)return!0;a=i?(new Date).getTime()/1e3:k.currentTime;for(var c=0;c<b;c+=1){var d=h.start(c),e=h.end(c);if(d<=a&&a<e)return!0}return!1}var f,h,i=!1,j=this.context,k=a.mediaElement;return f={initialize:b,reset:c,isEnabled:e},d(),f}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(29));e.__dashjs_factory_name="RangeController";var h=f.default.getClassFactory(e);c.default=h},{1:1,29:29}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a,b){a.some(function(a){var c=f.create(a,b);if(c)return e.push(c),!0})}function c(){e.forEach(function(a){return a.reset()}),e=[]}function d(a,b){e.forEach(function(c){return c.report(a,b)})}var e=[],f=(0,g.default)(this.context).getInstance({log:a.log});return{initialize:b,reset:c,report:d}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(18));e.__dashjs_factory_name="ReportingController";var h=f.default.getClassFactory(e);c.default=h},{1:1,18:18}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(b,c){var d,g=b.match(f);if(g){try{d=l[g[1]](k).create({eventBus:a.eventBus}),d.initialize(g[1],c,g[3],g[5])}catch(h){d=null,e("MetricsHandlerFactory: Could not create handler for type ".concat(g[1]," with args ").concat(g[3],", ").concat(g[5]," (").concat(h.message,")"))}return d}}function c(a,b){l[a]=b}function d(a){delete l[a]}var e=a.log,f=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,k=this.context,l={BufferLevel:g.default,DVBErrors:h.default,HttpList:i.default,PlayList:j.default,RepSwitchList:j.default,TcpList:j.default};return{create:b,register:c,unregister:d}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(14)),h=d(a(15)),i=d(a(17)),j=d(a(16));e.__dashjs_factory_name="MetricsHandlerFactory";var k=f.default.getSingletonFactory(e);c.default=k},{1:1,14:14,15:15,16:16,17:17}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(){try{return Object.keys(n).map(function(a){return n[a]}).reduce(function(a,b){return a.level<b.level?a:b})}catch(a){return}}function b(){var b=a();b&&k!==b.t&&(k=b.t,f.report(i,b))}function c(a,c,d){c&&(h=m.validateN(d),f=c,i=m.reconstructFullMetricName(a,d),j=setInterval(b,h))}function d(){clearInterval(j),j=null,h=0,f=null,k=null}function e(a,b,c){"BufferLevel"===a&&(n[c]=b)}var f,h,i,j,k,l=this.context,m=(0,g.default)(l).getInstance(),n=[];return{initialize:c,reset:d,handleNewMetric:e}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(21));e.__dashjs_factory_name="BufferLevelHandler";var h=f.default.getClassFactory(e);c.default=h},{1:1,21:21}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){h.off(g.default.METRICS_INITIALISATION_COMPLETE,b,this),h.trigger(g.default.BECAME_REPORTING_PLAYER)}function c(a,c){c&&(f=c,h.on(g.default.METRICS_INITIALISATION_COMPLETE,b,this))}function d(){f=null}function e(a,b){"DVBErrors"===a&&f&&f.report(a,b)}var f,h=a.eventBus;return{initialize:c,reset:d,handleNewMetric:e}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(7)),h=f.default.getClassFactory(e);c.default=h},{1:1,7:7}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a,b){d=a,e=b}function b(){e=null,d=void 0}function c(a,b){a===d&&e&&e.report(d,b)}var d,e;return{initialize:a,reset:b,handleNewMetric:c}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1));e.__dashjs_factory_name="GenericMetricHandler";var g=f.default.getClassFactory(e);c.default=g},{1:1}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(){var a=k;a.length&&e&&e.report(i,a),k=[]}function b(b,c,d,g){c&&(f=l.validateN(d),e=c,g&&g.length&&(h=g),i=l.reconstructFullMetricName(b,d,g),j=setInterval(a,f))}function c(){clearInterval(j),j=null,f=null,h=null,k=[],e=null}function d(a,b){"HttpList"===a&&(h&&h!==b.type||k.push(b))}var e,f,h,i,j,k=[],l=(0,g.default)(this.context).getInstance();return{initialize:b,reset:c,handleNewMetric:d}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(21));e.__dashjs_factory_name="HttpListHandler";var h=f.default.getClassFactory(e);c.default=h},{1:1,21:21}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a,b){var c;try{c=e[a.schemeIdUri](f).create(),c.initialize(a,b)}catch(d){c=null,h("ReportingFactory: could not create Reporting with schemeIdUri ".concat(a.schemeIdUri," (").concat(d.message,")"))}return c}function c(a,b){e[a]=b}function d(a){delete e[a]}var e={"urn:dvb:dash:reporting:2014":g.default},f=this.context,h=a.log;return{create:b,register:c,unregister:d}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(19));e.__dashjs_factory_name="ReportingFactory";var h=f.default.getSingletonFactory(e);c.default=h},{1:1,19:19}],19:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a,b,c){var d=new XMLHttpRequest,e=function(){var a=p.indexOf(d);-1!==a&&(p.splice(a,1),d.status>=200&&d.status<300?b&&b():c&&c())};p.push(d);try{d.open("GET",a),d.onloadend=e,d.onerror=e,d.send()}catch(f){d.onerror()}}function b(b,c){Array.isArray(c)||(c=[c]),k&&n.isEnabled()&&c.forEach(function(c){var d=f.serialise(c);j&&"DVBErrors"!==b&&(d="metricname=".concat(b,"&").concat(d)),d="".concat(m,"?").concat(d),a(d,null,function(){k=!1})})}function c(a,b){var c;if(n=b,!(m=a["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");l||(c=a["dvb:probability"]||a["dvb:priority"]||0,c&&(1e3===c||c/1e3>=i.random())&&(k=!0),l=!0)}function d(){o||(p.forEach(function(a){return a.abort()}),p=[]),l=!1,k=!1,m=null,n=null}var e=this.context,f=(0,g.default)(e).getInstance(),i=(0,h.default)(e).getInstance(),j=!0,k=!1,l=!1,m=null,n=null,o=!0,p=[];return{report:b,initialize:c,reset:d}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1)),g=d(a(23)),h=d(a(24));e.__dashjs_factory_name="DVBReporting";var i=f.default.getClassFactory(e);c.default=i},{1:1,23:23,24:24}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a){var b=new f.default;if(p){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.mpdurl||(b.mpdurl=p.originalUrl||p.url),b.terror||(b.terror=new Date),r.addDVBErrors(b)}}function c(a){a.error||(p=a.manifest)}function d(a){b({errorcode:f.default.BASE_URL_CHANGED,servicelocation:a.entry})}function e(){b({errorcode:f.default.BECAME_REPORTER})}function j(a){(0===a.responsecode||a.responsecode>=400||a.responsecode<100||a.responsecode>=600)&&b({errorcode:a.responsecode||f.default.CONNECTION_ERROR,url:a.url,terror:a.tresponse,servicelocation:a._serviceLocation})}function k(a){switch(a.metric){case"HttpList":j(a.value)}}function l(a){var c,d=a.error?a.error.code:0;switch(d){case MediaError.MEDIA_ERR_NETWORK:c=f.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:c=f.default.CORRUPT_MEDIA_OTHER;break;default:return}b({errorcode:c})}function m(){q.on(g.default.MANIFEST_UPDATED,c,o),q.on(g.default.SERVICE_LOCATION_BLACKLIST_CHANGED,d,o),q.on(h.default.METRIC_ADDED,k,o),q.on(h.default.METRIC_UPDATED,k,o),q.on(h.default.PLAYBACK_ERROR,l,o),q.on(i.default.BECAME_REPORTING_PLAYER,e,o)}function n(){q.off(g.default.MANIFEST_UPDATED,c,o),q.off(g.default.SERVICE_LOCATION_BLACKLIST_CHANGED,d,o),q.off(h.default.METRIC_ADDED,k,o),q.off(h.default.METRIC_UPDATED,k,o),q.off(h.default.PLAYBACK_ERROR,l,o),q.off(i.default.BECAME_REPORTING_PLAYER,e,o)}var o,p,q=a.eventBus,r=a.metricsModel;return o={initialise:m,reset:n},m(),o}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(25)),g=d(a(3)),h=d(a(5)),i=d(a(7)),j=d(a(1));e.__dashjs_factory_name="DVBErrorsTranslator";var k=j.default.getSingletonFactory(e);c.default=k},{1:1,25:25,3:3,5:5,7:7}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return{reconstructFullMetricName:function(a,b,c){var d=a;return b&&(d+="("+b,c&&c.length&&(d+=","+c),d+=")"),d},validateN:function(a){if(!a)throw new Error("missing n");if(isNaN(a))throw new Error("n is NaN");if(a<0)throw new Error("n must be positive");return a}}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1));e.__dashjs_factory_name="HandlerHelpers";var g=f.default.getSingletonFactory(e);c.default=g},{1:1}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a,b,c){var e,f,g=d.getMpd(a),h=0;return b?h=g.availabilityStartTime.getTime()/1e3:(e=this.getRegularPeriods(a,g),e.length&&(h=e[0].start)),f=h,c&&c.hasOwnProperty("starttime")&&(f+=c.starttime),f}function c(a){var c=[];return a.Metrics_asArray&&a.Metrics_asArray.forEach(function(e){var i=new f.default,j=d.getIsDynamic(a);e.hasOwnProperty("metrics")&&(i.metrics=e.metrics,e.Range_asArray&&e.Range_asArray.forEach(function(c){var e=new g.default;e.starttime=b(a,j,c),c.hasOwnProperty("duration")?e.duration=c.duration:e.duration=d.getDuration(a),e._useWallClockTime=j,i.Range.push(e)}),e.Reporting_asArray&&(e.Reporting_asArray.forEach(function(a){var b=new h.default;if(a.hasOwnProperty("schemeIdUri")){b.schemeIdUri=a.schemeIdUri;for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);i.Reporting.push(b)}}),c.push(i)))}),c}var d=a.dashManifestModel;return{getMetrics:c}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(26)),g=d(a(27)),h=d(a(28)),i=d(a(1));e.__dashjs_factory_name="ManifestParsing";var j=i.default.getSingletonFactory(e);c.default=j},{1:1,26:26,27:27,28:28}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(b){var c,d,e=[],f=[];for(c in b)if(b.hasOwnProperty(c)&&0!==c.indexOf("_")){if(d=b[c],void 0!==d&&null!==d||(d=""),Array.isArray(d)){if(!d.length)continue;f=[],d.forEach(function(b){var c="Object"!==Object.prototype.toString.call(b).slice(8,-1);f.push(c?b:a(b))}),d=encodeURIComponent(f.join(","))}else"string"==typeof d?d=encodeURIComponent(d):d instanceof Date?d=d.toISOString():"number"==typeof d&&(d=Math.round(d));e.push(c+"="+d)}return e.join("&")}return{serialise:a}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1));e.__dashjs_factory_name="MetricSerialiser";var g=f.default.getSingletonFactory(e);c.default=g},{1:1}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(){f&&(c||(c=new g(i)),f.getRandomValues(c),d=0)}function b(b,e){var g;return b||(b=0),e||(e=1),f?(d===c.length&&a(),g=c[d]/h,d+=1):g=Math.random(),g*(e-b)+b}var c,d,e,f=window.crypto||window.msCrypto,g=Uint32Array,h=Math.pow(2,8*g.BYTES_PER_ELEMENT)-1,i=10;return e={random:b},a(),e}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1));e.__dashjs_factory_name="RNG";var g=f.default.getSingletonFactory(e);c.default=g},{1:1}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=function a(){d(this,a),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};e.SSL_CONNECTION_FAILED_PREFIX="SSL",e.DNS_RESOLUTION_FAILED="C00",e.HOST_UNREACHABLE="C01",e.CONNECTION_REFUSED="C02",e.CONNECTION_ERROR="C03",e.CORRUPT_MEDIA_ISOBMFF="M00",e.CORRUPT_MEDIA_OTHER="M01",e.BASE_URL_CHANGED="F00",e.BECAME_REPORTER="S00";var f=e;c.default=f},{}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=function a(){d(this,a),this.metrics="",this.Range=[],this.Reporting=[]},f=e;c.default=f},{}],27:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=function a(){d(this,a),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1},f=e;c.default=f},{}],28:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var e=function a(){d(this,a),this.schemeIdUri="",this.value=""},f=e;c.default=f},{}],29:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a,b){var c=0;for(c=0;c<this.customTimeRangeArray.length&&a>this.customTimeRangeArray[c].start;c++);for(this.customTimeRangeArray.splice(c,0,{start:a,end:b}),c=0;c<this.customTimeRangeArray.length-1;c++)this.mergeRanges(c,c+1)&&c--;this.length=this.customTimeRangeArray.length}function b(){this.customTimeRangeArray=[],this.length=0}function c(a,b){for(var c=0;c<this.customTimeRangeArray.length;c++)if(a<=this.customTimeRangeArray[c].start&&b>=this.customTimeRangeArray[c].end)this.customTimeRangeArray.splice(c,1),c--;else{if(a>this.customTimeRangeArray[c].start&&b<this.customTimeRangeArray[c].end){this.customTimeRangeArray.splice(c+1,0,{start:b,end:this.customTimeRangeArray[c].end}),this.customTimeRangeArray[c].end=a;break}a>this.customTimeRangeArray[c].start&&a<this.customTimeRangeArray[c].end?this.customTimeRangeArray[c].end=a:b>this.customTimeRangeArray[c].start&&b<this.customTimeRangeArray[c].end&&(this.customTimeRangeArray[c].start=b)}this.length=this.customTimeRangeArray.length}function d(a,b){var c=this.customTimeRangeArray[a],d=this.customTimeRangeArray[b];return c.start<=d.start&&d.start<=c.end&&c.end<=d.end?(c.end=d.end,this.customTimeRangeArray.splice(b,1),!0):d.start<=c.start&&c.start<=d.end&&d.end<=c.end?(c.start=d.start,this.customTimeRangeArray.splice(b,1),!0):d.start<=c.start&&c.start<=d.end&&c.end<=d.end?(this.customTimeRangeArray.splice(a,1),!0):c.start<=d.start&&d.start<=c.end&&d.end<=c.end&&(this.customTimeRangeArray.splice(b,1),!0)}function e(a){return this.customTimeRangeArray[a].start}function f(a){return this.customTimeRangeArray[a].end}return{customTimeRangeArray:[],length:0,add:a,clear:b,remove:c,mergeRanges:d,start:e,end:f}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f=d(a(1));e.__dashjs_factory_name="CustomTimeRanges";var g=f.default.getClassFactory(e);c.default=g},{1:1}]},{},[6])(6)});
//# sourceMappingURL=dash.reporting.min.js.map